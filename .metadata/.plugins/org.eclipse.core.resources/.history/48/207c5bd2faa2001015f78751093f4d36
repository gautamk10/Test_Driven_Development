
#include "stm32f429xx.h"
#include "fpu.h"
#include "uart.h"
#include <stdio.h>
#include <timbase.h>
#include "bsp.h"


bool btn_state;

#define VECT_TAB_BASE_ADDRESS 		FLASH_BASE
#define VECT_TAB_OFFSET				8000

void led_toggle(uint32_t dly_ms)
{
	GPIOG->ODR ^= LED_GREEN;
	delay(dly_ms);
}

int main()
{
	//Enable FPU
	fpu_enable();

	//Initialize UART
	debug_uart_init();

	//Initialize the Timebase
	timbase_init();

	//Initilize LED
	led_init();

	//Initilalize Push Button
	button_init();


	while(1)
	{
		printf("User Application 1 Running\n\r");
		led_toggle(300);

	}

}

void SystemInit(void)
{
	SCB->VTOR = VECT_TAB_BASE_ADDRESS | VECT_TAB_OFFSET ;
}
