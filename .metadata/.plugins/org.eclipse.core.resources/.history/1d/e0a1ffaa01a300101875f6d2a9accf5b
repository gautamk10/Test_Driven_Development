
#include "stm32f429xx.h"
#include "fpu.h"
#include "uart.h"
#include <stdio.h>
#include <timbase.h>
#include "bsp.h"

#define GPIOGEN			(1U<<6)
#define PIN_G13			(1U<<13)
#define LED_GREEN	   	PIN_G13

void led_toggle(uint32_t dly_ms)
{
	GPIOG->ODR ^= LED_GREEN;
	delay(dly_ms);
}

bool btn_state;

#define VECT_TAB_BASE_ADDRESS 		FLASH_BASE
#define VECT_TAB_OFFSET				0x8000

int main()
{
	//Enable FPU
	fpu_enable();

	//Initialize UART
	debug_uart_init();

	//Initialize the Timebase
	timbase_init();

	//Initilize LED
	led_init();

	//Initilalize Push Button
	button_init();


	while(1)
	{
		led_toggle(200);
		printf("User Application 1 Running\n\r");


	}

}

void SystemInit(void)
{
	SCB->VTOR = VECT_TAB_BASE_ADDRESS | VECT_TAB_OFFSET ;
}
